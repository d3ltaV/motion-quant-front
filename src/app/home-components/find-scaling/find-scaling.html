<div class="container">
  <div class="upload-section">
    <h3>Upload Video</h3>
    <div class="input-sec">
      <input type="file" #fileInput accept="video/*" (change)="onFileSelected($event)" [disabled]="isUploading()" style="display: none;">
      <button class="upload-btn" matButton="tonal" (click)="fileInput.click()" [disabled]="isUploading()"> Choose Video File </button>
    </div>
    <div class="file-info" *ngIf="selectedFile()">
      <p><strong>Selected:</strong> {{ selectedFile()!.name }}</p>
      <p><strong>Size:</strong> {{ (selectedFile()!.size / 1024 / 1024).toFixed(2) }} MB</p>
    </div>
  </div>
    
  <div class="vid-info-section">
    <h3>Video information</h3>
    <div class="info">
      <div class="one">
        <mat-form-field class="rate">
          <mat-label>Frame rate (/s):</mat-label>
          <input matInput type="number" [value]="vidParams().frame_rate"  (input)="onParameterChange('frame_rate', $any($event.target).value)"  [disabled]="isUploading()">
        </mat-form-field>
        <mat-form-field class="resolution">
          <mat-label>Resolution</mat-label>
            <mat-select [value]="vidParams().resolution.width + 'x' + vidParams().resolution.height" (selectionChange)="onResolutionSelect($event.value)" [disabled]="isUploading()">
              <mat-option value="3840x2160">4K (3840x2160)</mat-option>
              <mat-option value="2560x1440">1440p (2560x1440)</mat-option>
              <mat-option value="1920x1080">1080p (1920x1080)</mat-option>
              <mat-option value="1280x720">720p (1280x720)</mat-option>
              <mat-option value="854x480">480p (854x480)</mat-option>
              <mat-option value="640x360">360p (640x360)</mat-option>
            </mat-select>
        </mat-form-field>
      </div>
      <div class="two">
        <mat-form-field class="distance">
          <mat-label>Distance to subject (cm):</mat-label>
          <input matInput type="number" [value]="vidParams().distance" (input)="onParameterChange('distance',  $any($event.target).value)" [disabled]="isUploading()">
        </mat-form-field>
        <mat-form-field class="length"> 
          <mat-label>Real ruler length</mat-label>
          <input matInput type="number" [value]="vidParams().ruler_length" (input)="onParameterChange('ruler_length', $any($event.target).value)" [disabled]="isUploading()">
        </mat-form-field>
      </div>
    </div>
  </div>
  <div class="action-section">
    <button matButton="tonal" class="upload-btn" (click)="upload()" [disabled]="!selectedFile() || isUploading()">
      @if (!isUploading()) {
        <span>Process Video</span>
      } @else {
        <span>Processing...</span>
      }
    </button>
  </div>

  @if (errorMessage()) {
      <div class="message error-message"> {{ errorMessage() }} </div>
  }
  @if (successMessage()) {
      <div class="message success-message"> {{ successMessage() }} </div>
  }
</div>